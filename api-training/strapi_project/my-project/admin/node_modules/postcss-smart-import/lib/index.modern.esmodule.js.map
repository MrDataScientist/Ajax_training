{"version":3,"file":"index.modern.esmodule.js","sources":["../src/resolve-id.js","../src/load-content.js","../src/parse-statements.js","../src/index.js"],"sourcesContent":["import { default as resolveId } from \"resolve\"\nimport { includes } from \"lodash\"\n\nvar moduleDirectories = [\n  \"web_modules\",\n  \"node_modules\"\n]\n\nfunction resolveModule(id, opts)\n{\n  return new Promise((resolve, reject) =>\n  {\n    resolveId(id, opts, (err, path) =>\n      err ? reject(err) : resolve(path)\n    )\n  })\n}\n\nexport default function(id, base, options)\n{\n  var paths = options.path\n\n  var resolveOpts = {\n    basedir: base,\n    moduleDirectory: moduleDirectories,\n    paths: paths,\n    extensions: [ \".css\", \".sss\", \".less\", \".scss\", \".sass\" ],\n    packageFilter: function processPackage(pkg)\n    {\n      if (pkg.style) {\n        pkg.main = pkg.style\n      }\n      else if (pkg.browser) {\n        pkg.main = pkg.browser\n      }\n      else if (!pkg.main || !(/\\.css$/).test(pkg.main)) {\n        pkg.main = \"index.css\"\n      }\n      return pkg\n    }\n  }\n\n  return resolveModule(\"./\" + id, resolveOpts)\n    .catch(() =>\n       resolveModule(id, resolveOpts)\n    )\n    .catch(() => {\n      if (!includes(paths, base)) {\n        paths.unshift(base)\n      }\n\n      throw new Error([\n        \"Failed to find '\" + id + \"'\",\n        \"in [ \",\n        \"    \" + paths.join(\",\\n        \"),\n        \"]\"\n      ].join(\"\\n    \"))\n    })\n}\n","import readCache from \"read-cache\"\n\nexport default function loadContent(fileName) {\n  return readCache(fileName, \"utf-8\")\n}\n","import valueParser from \"postcss-value-parser\"\n\nvar stringify = valueParser.stringify\n\nexport default function parseStatements(result, styles)\n{\n  var statements = []\n  var nodes = []\n\n  styles.each((node) =>\n  {\n    var stmt\n    if (node.type === \"atrule\" && node.name === \"import\")\n      stmt = parseImport(result, node)\n\n    if (stmt)\n    {\n      if (nodes.length > 0)\n      {\n        statements.push({\n          type: \"nodes\",\n          nodes: nodes\n        })\n\n        nodes = []\n      }\n\n      statements.push(stmt)\n    }\n    else\n    {\n      nodes.push(node)\n    }\n  })\n\n  if (nodes.length > 0)\n  {\n    statements.push({\n      type: \"nodes\",\n      nodes: nodes\n    })\n  }\n\n  return statements\n}\n\nfunction parseImport(result, atRule)\n{\n  var prev = atRule.prev()\n  while (prev && prev.type === \"comment\") {\n    prev = prev.prev()\n  }\n\n  if (prev)\n  {\n    if (prev.type !== \"atrule\" || (prev.name !== \"import\" && prev.name !== \"charset\"))\n    {\n      return result.warn(\n        \"@import must precede all other statements (besides @charset)\",\n        { node: atRule }\n      )\n    }\n  }\n\n  if (atRule.nodes)\n  {\n    return result.warn(\n      \"It looks like you didn't end your @import statement correctly. Child nodes are attached to it.\",\n      { node: atRule }\n    )\n  }\n\n  var params = valueParser(atRule.params).nodes\n  var stmt = {\n    type: \"import\",\n    node: atRule\n  }\n\n  if (\n    params.length === 0 ||\n    (\n      params[0].type !== \"string\" ||\n      !params[0].value\n    ) &&\n    (\n      params[0].type !== \"function\" ||\n      params[0].value !== \"url\" ||\n      params[0].nodes.length === 0 ||\n      !params[0].nodes[0].value\n    )\n  ) {\n    return result.warn(\n      \"Unable to find uri in '\" + atRule.toString() + \"'\",\n      { node: atRule }\n    )\n  }\n\n  if (params[0].type === \"string\")\n    stmt.uri = params[0].value\n  else\n    stmt.uri = params[0].nodes[0].value\n\n  stmt.fullUri = stringify(params[0])\n\n  return stmt\n}\n","import path from \"path\"\nimport assign from \"object-assign\"\nimport postcss from \"postcss\"\nimport { get } from \"lodash\"\n\nimport resolveId from \"./resolve-id\"\nimport loadContent from \"./load-content\"\nimport parseStatements from \"./parse-statements\"\nimport promiseEach from \"promise-each\"\n\nfunction SmartImport(options)\n{\n  options = assign({\n    root: process.cwd(),\n    path: [],\n    skipDuplicates: true,\n    resolve: resolveId,\n    load: loadContent,\n    plugins: []\n  }, options)\n\n  options.root = path.resolve(options.root)\n\n  // convert string to an array of a single element\n  if (typeof options.path === \"string\")\n    options.path = [ options.path ]\n\n  if (!Array.isArray(options.path))\n    options.path = []\n\n  options.path = options.path.map((possibleRelativePath) =>\n    path.resolve(options.root, possibleRelativePath)\n  )\n\n  return function(styles, result)\n  {\n    var state = {\n      importedFiles: {},\n      hashFiles: {}\n    }\n\n    var fileName = get(styles, \"source.input.file\")\n    if (fileName)\n      state.importedFiles[fileName] = {}\n\n    if (options.plugins && !Array.isArray(options.plugins))\n      throw new Error(\"plugins option must be an array\")\n\n    return parseStyles(result, styles, options, state, [])\n      .then((bundle) => {\n        applyRaws(bundle)\n        applyStyles(bundle, styles)\n\n        if (typeof options.onImport === \"function\")\n          options.onImport(Object.keys(state.importedFiles))\n      })\n  }\n}\n\nfunction applyRaws(bundle)\n{\n  bundle.forEach((stmt, index) =>\n  {\n    if (index === 0)\n      return\n\n    if (stmt.parent)\n    {\n      var before = stmt.parent.node.raws.before\n      if (stmt.type === \"nodes\")\n        stmt.nodes[0].raws.before = before\n      else\n        stmt.node.raws.before = before\n    }\n    else if (stmt.type === \"nodes\")\n    {\n      stmt.nodes[0].raws.before = stmt.nodes[0].raws.before || \"\\n\"\n    }\n  })\n}\n\nfunction applyStyles(bundle, styles)\n{\n  styles.nodes = []\n\n  bundle.forEach((stmt) =>\n  {\n    if (stmt.type === \"import\")\n    {\n      stmt.node.parent = undefined\n      styles.append(stmt.node)\n    }\n    else if (stmt.type === \"media\")\n    {\n      stmt.node.parent = undefined\n      styles.append(stmt.node)\n    }\n    else if (stmt.type === \"nodes\")\n    {\n      stmt.nodes.forEach((node) => {\n        node.parent = undefined\n        styles.append(node)\n      })\n    }\n  })\n}\n\nfunction parseStyles(result, styles, options, state, media)\n{\n  var statements = parseStatements(result, styles)\n\n  return Promise.resolve(statements).then(promiseEach((stmt) => {\n    // skip protocol base uri (protocol://url) or protocol-relative\n    if (stmt.type !== \"import\" || (/^(?:[a-z]+:)?\\/\\//i).test(stmt.uri))\n      return null\n    else\n      return resolveImportId(result, stmt, options, state)\n  }))\n    .then(() => {\n      var imports = []\n      var bundle = []\n\n      // squash statements and their children\n      statements.forEach((stmt) =>\n      {\n        if (stmt.type === \"import\")\n        {\n          if (stmt.children)\n          {\n            stmt.children.forEach((child, index) =>\n            {\n              if (child.type === \"import\")\n                imports.push(child)\n              else\n                bundle.push(child)\n\n              // For better output\n              if (index === 0)\n                child.parent = stmt\n            })\n          }\n          else\n          {\n            imports.push(stmt)\n          }\n        }\n        else if (stmt.type === \"media\" || stmt.type === \"nodes\")\n        {\n          bundle.push(stmt)\n        }\n      })\n\n      return imports.concat(bundle)\n    })\n}\n\nfunction resolveImportId(result, stmt, options, state)\n{\n  var atRule = stmt.node\n  var sourceFile = get(atRule, \"source.input.file\")\n  var base = sourceFile ? path.dirname(sourceFile) : options.root\n\n  return Promise.resolve(options.resolve(stmt.uri, base, options))\n    .then((resolved) => {\n      if (!Array.isArray(resolved))\n        resolved = [ resolved ]\n\n      // Add dependency messages:\n      resolved.forEach((fileName) => {\n        result.messages.push({\n          type: \"dependency\",\n          file: fileName,\n          parent: sourceFile\n        })\n      })\n\n      return Promise.all(resolved.map((file) =>\n         loadImportContent(\n           result,\n           stmt,\n           file,\n           options,\n           state\n        )\n      ))\n    })\n    .then((importedContent) => {\n      // Merge loaded statements\n      stmt.children = importedContent.reduce((currentContent, statements) => {\n        if (statements) {\n          currentContent = currentContent.concat(statements)\n        }\n        return currentContent\n      }, [])\n    })\n    .catch((err) => {\n      result.warn(err.message, { node: atRule })\n    })\n}\n\nfunction loadImportContent(result, stmt, filename, options, state)\n{\n  var atRule = stmt.node\n  if (options.skipDuplicates)\n  {\n    // skip files already imported at the same scope\n    if (state.importedFiles[filename])\n      return null\n\n    // save imported files to skip them next time\n    state.importedFiles[filename] = true\n  }\n\n  return Promise.resolve(options.load(filename, options))\n    .then((content) => {\n      if (typeof options.transform !== \"function\") {\n        return content\n      }\n      return Promise.resolve(options.transform(content, filename, options))\n        .then((transformed) =>\n         typeof transformed === \"string\" ? transformed : content\n      )\n    })\n    .then((content) => {\n      if (content.trim() === \"\")\n      {\n        result.warn(filename + \" is empty\", { node: atRule })\n        return null\n      }\n\n      // skip previous imported files not containing @import rules\n      if (state.hashFiles[content])\n        return null\n\n      return postcss(options.plugins).process(content, {\n        from: filename,\n        syntax: result.opts.syntax,\n        parser: result.opts.parser\n      })\n        .then((importedResult) =>\n        {\n          var styles = importedResult.root\n          result.messages = result.messages.concat(importedResult.messages)\n\n          if (options.skipDuplicates)\n          {\n            var hasImport = styles.some((child) =>\n              child.type === \"atrule\" && child.name === \"import\"\n            )\n\n            if (!hasImport)\n              state.hashFiles[content] = true\n          }\n\n          // recursion: import @import from imported file\n          return parseStyles(result, styles, options, state)\n        })\n    })\n}\n\nexport default postcss.plugin(\"postcss-smart-import\", SmartImport)\n"],"names":["moduleDirectories","resolveModule","id","opts","Promise","resolve","reject","err","path","base","options","paths","resolveOpts","processPackage","pkg","style","main","browser","test","unshift","Error","join","loadContent","fileName","readCache","stringify","valueParser","parseStatements","result","styles","statements","nodes","each","node","stmt","type","name","parseImport","length","push","atRule","prev","warn","params","value","toString","uri","fullUri","SmartImport","assign","process","cwd","resolveId","root","Array","isArray","map","possibleRelativePath","state","importedFiles","plugins","parseStyles","then","bundle","onImport","Object","keys","applyRaws","forEach","index","parent","before","raws","applyStyles","undefined","append","media","promiseEach","resolveImportId","imports","children","child","concat","sourceFile","dirname","resolved","messages","all","file","loadImportContent","importedContent","reduce","currentContent","message","filename","skipDuplicates","load","content","transform","transformed","trim","hashFiles","postcss","syntax","parser","importedResult","hasImport","some","plugin"],"mappings":"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"}